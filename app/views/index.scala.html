@()(implicit assetsFinder: AssetsFinder)

@main("Welcome to Play") {
  <div id="mynetwork"  style="width: 768px;height:1024px;">
    <div class="vis-network">
      <canvas></canvas>
    </div>
  </div>

  <script type="text/javascript">

          // create an array with nodes
          var nodes = new vis.DataSet([
            {
              id: 1,
              label: '1',
              group: "initGroup"
            },
            {id: 2, label: '2', group: "initGroup"},
            {id: 3, label: '3', group: "initGroup"},
            {id: 4, label: '4', group: "initGroup"},
            {id: 5, label: '5', group: "initGroup"}
          ]);

          // create an array with edges
          var edges = new vis.DataSet([
            {from: 1, to: 3, color:{color:"#848484"},
              arrows: {
                to: {enabled: true, scaleFactor:0.8, type:'arrow'}
              },
              label:"Hello",
              title:"World"
            },
            {from: 1, to: 2, color:{color:"#848484"}},
            {from: 2, to: 4, color:{color:"#848484"}},
            {from: 2, to: 5, color:{color:"#848484"}},
            {from: 4, to: 2, color:{color:"#848484"}}

          ]);

          // create a network
          var container = document.getElementById('mynetwork');
          var data = {
            nodes: nodes,
            edges: edges
          };
          var options = {
            groups:{
              initGroup:{
                color:{background: '#D2E5FF', border: "#2B7CE9"},
                shape:"circle",
                margin:12
              }
            }
          };
          //var network = new vis.Network(container, data, options);

          $.get("/hello", function (data) {
              //console.log(data)


              var arrNodes = []
              var arrEdges = []

              //

              data["nodes"].forEach(function(gnode){

                  var tmp = {}
                  tmp["id"] = gnode
                  tmp["label"] = gnode
                  tmp["group"] = "initGroup"

                  arrNodes.push(tmp)
              })


              /*data.forEach(function (element) {
                  //console.log(element)
                  arr.push(element)
              })*/
              //console.log(JSON.stringify(arr))

              var nodes1 = new vis.DataSet(arrNodes)

              //console.log(node1)

              //console.log(nodes)

              //node1.add(arr)

              console.log(data["edges"])

              var edgeColor = {color:"#848484"}

              var edgeArrow =  {
                "to": {enabled: true, scaleFactor:0.8, type:'arrow'}
              }

              data["edges"].forEach(function (gEdge) {
                  var tmp = {}
                  tmp["from"] = gEdge.head
                  tmp["to"] = gEdge.tail
                  tmp["color"] = edgeColor
                  tmp["arrows"] = edgeArrow
                  tmp["label"] = ''+gEdge.weight

                  arrEdges.push(tmp)
              })
              var edges1 = new vis.DataSet(arrEdges)

              console.log(edges1)
              //console.log(edges)
              var data1 = {
              nodes: nodes1,
              edges: edges1
            };

            var network = new vis.Network(container, data1, options);
          })

  </script>
}
