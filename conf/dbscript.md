<!--
/*
* First create user, and then create tablespace
* then create database
*/
-->


CREATE USER username password 'xxxx';

<!--
/*
* when create tablespace, we should create location directory first, and grand privilges on linux
*/
-->

mkdir /var/postgres/data

chown postgres:postgres /var/postgres/data

CREATE TABLESPACE tbs_name 
OWNER username 
LOCATION '/var/postgres/data'


CREATE DATABASE db_name OWNER username TABLESPACE tbs_name ENCODING=UTF8;




CREATE TABLE edges (

  id integer primary key GENERATED BY DEFAULT AS IDENTITY ,
  head_vertex varchar(32) NOT NULL,
  tail_vertex varchar(32) NOT NULL,
  weight integer NOT NULL DEFAULT 1
)

GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public to username;

insert into edges(head_vertex, tail_vertex, weight) values('0', '1', 1);
insert into edges(head_vertex, tail_vertex, weight) values('0', '2', 8);
insert into edges(head_vertex, tail_vertex, weight) values('1', '3', 3);
insert into edges(head_vertex, tail_vertex, weight) values('1', '2', 9);
insert into edges(head_vertex, tail_vertex, weight) values('2', '1', 1);
insert into edges(head_vertex, tail_vertex, weight) values('2', '4', 5);
insert into edges(head_vertex, tail_vertex, weight) values('3', '2', 4);
insert into edges(head_vertex, tail_vertex, weight) values('3', '4', 13);
insert into edges(head_vertex, tail_vertex, weight) values('3', '5', 15);
insert into edges(head_vertex, tail_vertex, weight) values('4', '5', 4);

